---
import Container from "../components/Container.astro";
import noticiasData from '../components/Data/noticias.json';
---

<Container>
  <!-- Sección del héroe -->
  <div class="relative flex flex-col-reverse items-center md:flex-row mt-0 md:mt-16" id="hero">
    <div class="flex flex-col items-center md:items-start md:w-1/2 py-6 md:py-12 md:pr-8">
      <h1 class="text-4xl md:text-5xl font-bold leading-tight text-center md:text-left text-black mb-4 md:mb-6">
        INSTITUTO DE EDUCACION SUPERIOR PEDAGOGICO PUBLICO,
        <span class="text-yellow-300 dark:text-yellow-200">ALIANZA ICHUÑA BÉLGICA</span>
      </h1>
      <p class="text-xl font-normal leading-8 text-center md:text-left text-gray-600 mb-6">
        Nos comprometemos a ofrecer una educación excepcional en un ambiente enriquecedor. ¡Explore, aprenda y crezca con nosotros!
      </p>
      <a class="px-8 py-4 bg-yellow-300 hover:bg-yellow-400 text-black rounded-full inline-flex items-center gap-2.5 transition-all duration-300 ease-in-out" rel="noopener noreferrer" href="/portalTransparencia" target="_blank">
        <h2 class="text-lg font-semibold">Portal Transparencia</h2>
      </a>
    </div>
    <div class="flex items-center justify-center md:w-1/2 py-6 md:py-12">
      <!-- Carrusel de imágenes -->
      <div id="default-carousel" class="relative w-full" data-carousel="slide">
        <!-- Carousel wrapper -->
        <div class="relative h-56 md:h-96 overflow-hidden rounded-lg shadow-lg">
          {noticiasData.map((noticia, index) => (
            <div class={`absolute w-full h-full transition-opacity duration-700 ease-in-out ${index === 0 ? 'opacity-100' : 'opacity-0'}`} data-carousel-item>
              <a href={`/noticias/${noticia.id}`} rel="noopener noreferrer">
                <img src={noticia.imagen} class="w-full h-full object-cover" alt={noticia.titulo} />
              </a>
            </div>
          ))}
        </div>
        <!-- Slider indicators -->
        <div class="absolute flex space-x-3 bottom-4 left-1/2 transform -translate-x-1/2">
          {noticiasData.map((_, index) => (
            <button type="button" class="w-3 h-3 rounded-full bg-gray-400 hover:bg-gray-600 transition-all duration-300 ease-in-out" aria-current={index === 0 ? 'true' : 'false'} aria-label={`Slide ${index + 1}`} data-carousel-slide-to={index}></button>
          ))}
        </div>
        <!-- Slider controls -->
        <button type="button" class="absolute top-1/2 left-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group -translate-y-1/2" data-carousel-prev>
          <span class="w-10 h-10 flex items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 transition-all duration-300 ease-in-out">
            <svg class="w-4 h-4 text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 1 1 5l4 4" />
            </svg>
            <span class="sr-only">Previous</span>
          </span>
        </button>
        <button type="button" class="absolute top-1/2 right-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group -translate-y-1/2" data-carousel-next>
          <span class="w-10 h-10 flex items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 transition-all duration-300 ease-in-out">
            <svg class="w-4 h-4 text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4" />
            </svg>
            <span class="sr-only">Next</span>
          </span>
        </button>
      </div>
    </div>
  </div>

  <!-- Sección de logotipos -->
  <div class="flex flex-col items-center space-y-6 w-full px-4 py-6">
    <h2 class="text-4xl font-semibold mb-4">Enlaces de interés</h2>
    <div class="grid grid-cols-2 sm:grid-cols-4 gap-6 w-full max-w-screen-xl mx-auto">
      <div class="p-4 transition duration-300 transform hover:scale-105 hover:shadow-lg rounded-lg overflow-hidden">
        <a href="https://www.perueduca.pe/">
          <img src="./logos/peru_educa.png" class="h-16 w-full object-contain" loading="lazy" alt="client logo" />
        </a>
      </div>
      <div class="p-4 transition duration-300 transform hover:scale-105 hover:shadow-lg rounded-lg overflow-hidden">
        <a href="https://www.gob.pe/sineace/">
          <img src="./logos/2.jpeg" class="h-16 w-full object-contain" loading="lazy" alt="client logo" />
        </a>
      </div>
      <div class="p-4 transition duration-300 transform hover:scale-105 hover:shadow-lg rounded-lg overflow-hidden">
        <a href="https://anterior.ugelilo.edu.pe/">
          <img src="./logos/3.jpeg" class="h-16 w-full object-contain" loading="lazy" alt="client logo" />
        </a>
      </div>
      <div class="p-4 transition duration-300 transform hover:scale-105 hover:shadow-lg rounded-lg overflow-hidden">
        <a href="https://m.facebook.com/ugel.mariscalnieto/">
          <img src="./logos/4.jpeg" class="h-16 w-full object-contain" loading="lazy" alt="client logo" />
        </a>
      </div>
    </div>
    <div class="grid grid-cols-2 sm:grid-cols-3 gap-6 w-full max-w-screen-xl mx-auto">
      <div class="p-4 transition duration-300 transform hover:scale-105 hover:shadow-lg rounded-lg overflow-hidden">
        <a href="https://m.facebook.com/p/Ugel-San-Ignacio-de-Loyola-EIB-100069749523726/">
          <img src="./logos/5.jpeg" class="h-16 w-full object-contain" loading="lazy" alt="client logo" />
        </a>
      </div>
      <div class="p-4 transition duration-300 transform hover:scale-105 hover:shadow-lg rounded-lg overflow-hidden">
        <a href="https://escale.minedu.gob.pe/">
          <img src="./logos/6.jpeg" class="h-16 w-full object-contain" loading="lazy" alt="client logo" />
        </a>
      </div>
      <div class="p-4 transition duration-300 transform hover:scale-105 hover:shadow-lg rounded-lg overflow-hidden">
        <a href="https://sia.pedagogicos.pe/">
          <img src="./logos/7.jpeg" class="h-16 w-full object-contain" loading="lazy" alt="client logo" />
        </a>
      </div>
    </div>
  </div>
</Container>

<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const carousel = document.querySelector('[data-carousel="slide"]');
    if (!carousel) return;

    const items = carousel.querySelectorAll('[data-carousel-item]');
    const indicators = carousel.querySelectorAll('[data-carousel-slide-to]');
    let currentIndex: number = 0;
    let timer: number | undefined;

    function showSlide(index: number) {
      items.forEach((item, i) => {
        item.classList.toggle('opacity-100', i === index);
        item.classList.toggle('opacity-0', i !== index);
      });
      indicators.forEach((indicator, i) => {
        indicator.setAttribute('aria-current', i === index ? 'true' : 'false');
      });
      currentIndex = index;
    }

    function nextSlide() {
      showSlide((currentIndex + 1) % items.length);
    }

    function prevSlide() {
      showSlide((currentIndex - 1 + items.length) % items.length);
    }

    function startTimer() {
      timer = window.setInterval(nextSlide, 10000);
    }

    function stopTimer() {
      if (timer) {
        clearInterval(timer);
      }
    }

    const nextButton = carousel.querySelector('[data-carousel-next]');
    const prevButton = carousel.querySelector('[data-carousel-prev]');

    if (nextButton) nextButton.addEventListener('click', () => {
      nextSlide();
      stopTimer();
    });
    if (prevButton) prevButton.addEventListener('click', () => {
      prevSlide();
      stopTimer();
    });

    indicators.forEach((indicator, index) => {
      indicator.addEventListener('click', () => {
        showSlide(index);
        stopTimer();
      });
    });

    showSlide(currentIndex);
    startTimer();
  });
</script>
